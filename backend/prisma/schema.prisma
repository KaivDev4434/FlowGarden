generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Project {
  id            String         @id @default(cuid())
  name          String
  plantType     PlantType      @default(SUCCULENT)
  health        Int            @default(50)
  growthStage   Int            @default(0)
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  status        ProjectStatus  @default(ACTIVE)
  lastWateredAt DateTime       @default(now())
  breakSessions BreakSession[]
  focusSessions FocusSession[]

  @@map("projects")
}

model FocusSession {
  id              String      @id @default(cuid())
  projectId       String
  startTime       DateTime    @default(now())
  endTime         DateTime?
  durationMinutes Int?
  sessionType     SessionType @default(TIMED)
  completed       Boolean     @default(false)
  sessionNumber   Int         @default(1)
  createdAt       DateTime    @default(now())
  project         Project     @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@map("focus_sessions")
}

model BreakSession {
  id              String    @id @default(cuid())
  projectId       String
  breakType       BreakType @default(SHORT)
  startTime       DateTime  @default(now())
  endTime         DateTime?
  durationMinutes Int?
  completed       Boolean   @default(false)
  skipped         Boolean   @default(false)
  sessionNumber   Int       @default(1)
  createdAt       DateTime  @default(now())
  project         Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@map("break_sessions")
}

model UserSettings {
  id                    String   @id @default(cuid())
  defaultFocusTime      Float    @default(10)
  defaultFocusTimeUnit  String   @default("seconds")
  shortBreakTime        Float    @default(2)
  shortBreakTimeUnit    String   @default("seconds")
  longBreakTime         Float    @default(5)
  longBreakTimeUnit     String   @default("seconds")
  autoStartBreaks       Boolean  @default(true)
  autoStartPomodoros    Boolean  @default(false)
  shortBreaksBeforeLong Int      @default(3)
  maxSessionsPerDay     Int      @default(8)
  longBreakInterval     Int      @default(4)
  soundsEnabled         Boolean  @default(true)
  notificationSounds    Boolean  @default(true)
  ambientSounds         Boolean  @default(true)
  volume                Int      @default(70)
  themePreference       String   @default("zen")
  animationsEnabled     Boolean  @default(true)
  reducedMotion         Boolean  @default(false)
  plantAnimationSpeed   String   @default("normal")
  clockFormat           String   @default("24h")
  browserNotifications  Boolean  @default(true)
  sessionReminders      Boolean  @default(true)
  plantCareReminders    Boolean  @default(true)
  autoSaveEnabled       Boolean  @default(true)
  dataCollection        Boolean  @default(true)
  betaFeatures          Boolean  @default(false)
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  @@map("user_settings")
}

enum PlantType {
  SUCCULENT
  BONSAI
  FLOWER
  HERB
  TREE
  GENERIC
}

enum ProjectStatus {
  ACTIVE
  PAUSED
  COMPLETED
  DEAD
}

enum SessionType {
  TIMED
  OPEN
  POMODORO
}

enum BreakType {
  SHORT
  LONG
}
